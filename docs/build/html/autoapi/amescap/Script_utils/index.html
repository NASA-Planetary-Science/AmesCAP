<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>amescap.Script_utils &mdash; AmesCAP 1.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            AmesCAP
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../MarsPull/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">MarsPull</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples.html">Examples &amp; Use Cases</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">AmesCAP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">amescap.Script_utils</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/autoapi/amescap/Script_utils/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-amescap.Script_utils">
<span id="amescap-script-utils"></span><h1><a class="reference internal" href="#module-amescap.Script_utils" title="amescap.Script_utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">amescap.Script_utils</span></code></a><a class="headerlink" href="#module-amescap.Script_utils" title="Link to this heading"></a></h1>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading"></a></h2>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h3>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.MY_func" title="amescap.Script_utils.MY_func"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MY_func</span></code></a>(Ls_cont)</p></td>
<td><p>This function return the Mars Year</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.find_tod_in_diurn" title="amescap.Script_utils.find_tod_in_diurn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_tod_in_diurn</span></code></a>(fNcdf)</p></td>
<td><p>Return the variable for the local time axis in diurn files.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.print_fileContent" title="amescap.Script_utils.print_fileContent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_fileContent</span></code></a>(fileNcdf)</p></td>
<td><p>Print the content of a Netcdf file in a compact format. Variables are sorted by dimensions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.print_varContent" title="amescap.Script_utils.print_varContent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_varContent</span></code></a>(fileNcdf, list_varfull[, print_stat])</p></td>
<td><p>Print the content of a variable inside a Netcdf file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.give_permission" title="amescap.Script_utils.give_permission"><code class="xref py py-obj docutils literal notranslate"><span class="pre">give_permission</span></code></a>(filename)</p></td>
<td><p># NAS system only: set group permission to the file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.check_file_tape" title="amescap.Script_utils.check_file_tape"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_file_tape</span></code></a>(fileNcdf[, abort])</p></td>
<td><p>Relevant for use on the NASA Advanced Supercomputing (NAS) environnment only</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.get_Ncdf_path" title="amescap.Script_utils.get_Ncdf_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_Ncdf_path</span></code></a>(fNcdf)</p></td>
<td><p>Return the full path of a Netcdf object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.extract_path_basename" title="amescap.Script_utils.extract_path_basename"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extract_path_basename</span></code></a>(filename)</p></td>
<td><p>Return the path and basename of a file. If only the filename is provided, assume it is the current directory</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.FV3_file_type" title="amescap.Script_utils.FV3_file_type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FV3_file_type</span></code></a>(fNcdf)</p></td>
<td><p>Return the type of output files:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.alt_FV3path" title="amescap.Script_utils.alt_FV3path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">alt_FV3path</span></code></a>(fullpaths, alt[, test_exist])</p></td>
<td><p>Internal function. given an interpolated daily, diurn or average file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.smart_reader" title="amescap.Script_utils.smart_reader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">smart_reader</span></code></a>(fNcdf, var_list[, suppress_warning])</p></td>
<td><p>Smarter alternative to using var=fNcdf.variables['var'][:] when handling PROCESSED files that also check</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.regrid_Ncfile" title="amescap.Script_utils.regrid_Ncfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">regrid_Ncfile</span></code></a>(VAR_Ncdf, file_Nc_in, file_Nc_target)</p></td>
<td><p>Regrid a Ncdf variable from one file's structure to match another file  [Alex Kling , May 2021]</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.progress" title="amescap.Script_utils.progress"><code class="xref py py-obj docutils literal notranslate"><span class="pre">progress</span></code></a>(k, Nmax)</p></td>
<td><p>Display a progress bar to monitor heavy calculations.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.section_content_amescap_profile" title="amescap.Script_utils.section_content_amescap_profile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">section_content_amescap_profile</span></code></a>(section_ID)</p></td>
<td><p>Execude code section in /home/user/.amescap_profile</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.filter_vars" title="amescap.Script_utils.filter_vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_vars</span></code></a>(fNcdf[, include_list, giveExclude])</p></td>
<td><p>Filter variable names in netcdf file for processing.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.find_fixedfile" title="amescap.Script_utils.find_fixedfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_fixedfile</span></code></a>(filename)</p></td>
<td><p>Batterson, Updated by Alex Nov 29 2022</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.get_longname_units" title="amescap.Script_utils.get_longname_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_longname_units</span></code></a>(fNcdf, varname)</p></td>
<td><p>Return the 'long_name' and 'units'  attributes of a netcdf variable.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.wbr_cmap" title="amescap.Script_utils.wbr_cmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wbr_cmap</span></code></a>()</p></td>
<td><p>Returns a color map that goes from white&gt;blue&gt;green&gt;yellow&gt;red or 'wbr'</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.rjw_cmap" title="amescap.Script_utils.rjw_cmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rjw_cmap</span></code></a>()</p></td>
<td><p>Returns a color map that goes from red&lt;jade&lt;wisteria or 'rjw'</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.dkass_dust_cmap" title="amescap.Script_utils.dkass_dust_cmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dkass_dust_cmap</span></code></a>()</p></td>
<td><p>Returns a color map that goes from yellow&gt;orange&gt;red&gt;purple</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.dkass_temp_cmap" title="amescap.Script_utils.dkass_temp_cmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dkass_temp_cmap</span></code></a>()</p></td>
<td><p>Returns a color map that goes from black&gt;purple&gt;blue&gt;green&gt;yellow&gt;orange&gt;red</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.pretty_print_to_fv_eta" title="amescap.Script_utils.pretty_print_to_fv_eta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pretty_print_to_fv_eta</span></code></a>(var, varname[, nperline])</p></td>
<td><p>Print the ak or bk coefficients to copy paste in fv_eta.f90</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#amescap.Script_utils.replace_dims" title="amescap.Script_utils.replace_dims"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replace_dims</span></code></a>(Ncvar_dim[, vert_dim_name])</p></td>
<td><p>Update the name for the variables dimension to match FV3's</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#amescap.Script_utils.ak_bk_loader" title="amescap.Script_utils.ak_bk_loader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ak_bk_loader</span></code></a>(fNcdf)</p></td>
<td><p>Return the ak and bk. First look in the current netcdf file.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.MY_func">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">MY_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ls_cont</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.MY_func" title="Link to this definition"></a></dt>
<dd><p>This function return the Mars Year
Args:</p>
<blockquote>
<div><p>Ls_cont: solar longitude, contineuous</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>MY : int the Mars year</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.find_tod_in_diurn">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">find_tod_in_diurn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fNcdf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.find_tod_in_diurn" title="Link to this definition"></a></dt>
<dd><p>Return the variable for the local time axis in diurn files.
Original implementation by Victoria H.
Args:</p>
<blockquote>
<div><p>fNcdf: an (open) Netcdf file object</p>
</div></blockquote>
<dl class="simple">
<dt>Return:</dt><dd><p>tod (string): ‘time_of_day_16’or ‘time_of_day_24’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.print_fileContent">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">print_fileContent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileNcdf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.print_fileContent" title="Link to this definition"></a></dt>
<dd><p>Print the content of a Netcdf file in a compact format. Variables are sorted by dimensions.
Args:</p>
<blockquote>
<div><p>fileNcdf: full path to netcdf file</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None (print in the terminal)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.print_varContent">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">print_varContent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileNcdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_varfull</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_stat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.print_varContent" title="Link to this definition"></a></dt>
<dd><p>Print the content of a variable inside a Netcdf file
This test is based on the existence of a least one  00XXX.fixed.nc in the current directory.
Args:</p>
<blockquote>
<div><p>fileNcdf:      full path to netcdf file
list_varfull:  list of variable names and optional slices, e.g [‘lon’ ,’ps[:,10,20]’]
print_stat:  if true, print min, mean and max instead of values</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None (print in the terminal)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.give_permission">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">give_permission</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.give_permission" title="Link to this definition"></a></dt>
<dd><p># NAS system only: set group permission to the file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.check_file_tape">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">check_file_tape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileNcdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.check_file_tape" title="Link to this definition"></a></dt>
<dd><p>Relevant for use on the NASA Advanced Supercomputing (NAS) environnment only
Check if a file is present on the disk by running the NAS dmls -l data migration command.
This avoid the program to stall if the files need to be migrated from the disk to the tape
Args:</p>
<blockquote>
<div><p>fileNcdf: full path to netcdf file
exit: boolean. If True, exit the program (avoid stalling the program if file is not on disk)</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None (print status and abort program)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.get_Ncdf_path">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">get_Ncdf_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fNcdf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.get_Ncdf_path" title="Link to this definition"></a></dt>
<dd><p>Return the full path of a Netcdf object.
Note that ‘Dataset’ and multi-files dataset (i.e. ‘MFDataset’) have different
attributes for the path, hence the need for this function.
Args:</p>
<blockquote>
<div><p>fNcdf : Dataset or  MFDataset object</p>
</div></blockquote>
<dl class="simple">
<dt>Returns :</dt><dd><p>Path: string (list) for Dataset (MFDataset)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.extract_path_basename">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">extract_path_basename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.extract_path_basename" title="Link to this definition"></a></dt>
<dd><p>Return the path and basename of a file. If only the filename is provided, assume it is the current directory
Args:</p>
<blockquote>
<div><p>filename: e.g. ‘XXXXX.fixed.nc’, ‘./history/XXXXX.fixed.nc’ or ‘/home/user/history/XXXXX.fixed.nc’</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>filepath : ‘/home/user/history/XXXXX.fixed.nc’ in all the cases above
basename:   XXXXX.fixed.nc in all the cases above</p>
</dd>
</dl>
<p><strong>*NOTE*</strong>
This routine does not check for file existence and only operates on the provided input string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.FV3_file_type">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">FV3_file_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fNcdf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.FV3_file_type" title="Link to this definition"></a></dt>
<dd><p>Return the type of output files:
Args:</p>
<blockquote>
<div><p>fNcdf: an (open) Netcdf file object</p>
</div></blockquote>
<dl class="simple">
<dt>Return:</dt><dd><p>f_type (string): ‘fixed’, ‘contineous’, or ‘diurn’
interp_type (string): ‘pfull’,’pstd’,’zstd’,’zagl’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.alt_FV3path">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">alt_FV3path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fullpaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_exist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.alt_FV3path" title="Link to this definition"></a></dt>
<dd><p>Internal function. given an interpolated daily, diurn or average file
return the raw or fixed file. Accept string or list as input
Args:</p>
<blockquote>
<div><dl class="simple">
<dt>fullpaths<span class="classifier">e.g ‘/u/path/00010.atmos_average_pstd.nc’ or LIST</span></dt><dd><p>alt: alternative type ‘raw’ or ‘fixed’
test_exist=True test file existence on disk</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Returns :</dt><dd><dl class="simple">
<dt>Alternative path to raw or fixed file, e.g.</dt><dd><p>‘/u/path/00010.atmos_average.nc’
‘/u/path/00010.fixed.nc’</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.smart_reader">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">smart_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fNcdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppress_warning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.smart_reader" title="Link to this definition"></a></dt>
<dd><p>Smarter alternative to using var=fNcdf.variables[‘var’][:] when handling PROCESSED files that also check
matching XXXXX.atmos_average.nc (or daily…) and XXXXX.fixed.nc files</p>
<dl class="simple">
<dt>Args:</dt><dd><p>fNcdf: Netcdf file object (i.e. already opened with Dataset or MFDataset)
var_list: variable or list of variables, e.g ‘areo’ or [‘pk’,’bk’,’areo’]
suppress_warning: Suppress debug statement, useful if variable is not expected to be found in the file anyway</p>
</dd>
<dt>Returns:</dt><dd><p>out_list: variables content as singleton or values to unpack</p>
</dd>
</dl>
<p>from netCDF4 import Dataset</p>
<p>fNcdf=Dataset(‘/u/akling/FV3/00668.atmos_average_pstd.nc’,’r’)</p>
<p>ucomp= fNcdf.variables[‘ucomp’][:]   # &lt;&lt; this is the regular way
vcomp= smart_reader(fNcdf,’vcomp’)   # &lt;&lt; this is exacly equivalent
pk,bk,areo= smart_reader(fNcdf,[‘pk’,’bk’,’areo’])  # this will get ‘areo’ from 00668.atmos_average.nc is not available in the original _pstd.nc file</p>
<blockquote>
<div><p># if pk and bk are absent from 0668.atmos_average.nc, it will also check 00668.fixed.n</p>
</div></blockquote>
<dl class="simple">
<dt><strong>* NOTE *</strong></dt><dd><p>-Only the variables’ content is returned, not the attributes</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.regrid_Ncfile">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">regrid_Ncfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">VAR_Ncdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_Nc_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_Nc_target</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.regrid_Ncfile" title="Link to this definition"></a></dt>
<dd><p>Regrid a Ncdf variable from one file’s structure to match another file  [Alex Kling , May 2021]
Args:</p>
<blockquote>
<div><p>VAR_Ncdf: A netCDF4 variable OBJECT, e.g. ‘f_in.variables[‘temp’]’ from the source file
file_Nc_in: The opened netcdf file object  for that input variable, e.g f_in=Dataset(‘fname’,’r’)
file_Nc_target: An opened netcdf file object  for the target grid t e.g f_out=Dataset(‘fname’,’r’)</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>VAR_OUT: the VALUES of VAR_Ncdf[:], interpolated on the grid for the target file.</p>
</dd>
</dl>
<p><strong>* Note*</strong>
While the KDTree interpolation can handle a 3D dataset (lon/lat/lev instead of just 2D lon/lat) , the grid points in the vertical are just a few 10’s -100’s meter in the PBL vs few 10’-100’s km in the horizontal. This would results in excessive weighting in the vertical, which is why the vertical dimension is handled separately.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.progress">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">progress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nmax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.progress" title="Link to this definition"></a></dt>
<dd><p>Display a progress bar to monitor heavy calculations.
Args:</p>
<blockquote>
<div><p>k: current iteration of the outer loop
Nmax: max iteration of the outer loop</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>Running… [#———] 10.64 %</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.section_content_amescap_profile">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">section_content_amescap_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">section_ID</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.section_content_amescap_profile" title="Link to this definition"></a></dt>
<dd><p>Execude code section in /home/user/.amescap_profile
Args:</p>
<blockquote>
<div><p>section_ID: string defining the section to load, e.g ‘Pressure definitions for pstd’</p>
</div></blockquote>
<dl class="simple">
<dt>Returns</dt><dd><p>return line in that section as python code</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.filter_vars">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">filter_vars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fNcdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">giveExclude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.filter_vars" title="Link to this definition"></a></dt>
<dd><p>Filter variable names in netcdf file for processing.
Will return all dimensions (e.g. ‘lon’, ‘lat’…), the ‘areo’ variable, and any variable included in include_list
Args:</p>
<blockquote>
<div><p>fNcdf: an open netcdf4 object pointing to a diurn, daily or average file
include_list: a list of variables to include, e.g. [‘ucomp’,’vcomp’]
giveExclude: if True, instead return the variables that must be excluded from the file, i.e.</p>
<blockquote>
<div><p>exclude_var = [all the variables] - [axis &amp; dimensions] - [include_list]</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>Return:</dt><dd><p>var_list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.find_fixedfile">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">find_fixedfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.find_fixedfile" title="Link to this definition"></a></dt>
<dd><p>Batterson, Updated by Alex Nov 29 2022
Args:</p>
<blockquote>
<div><dl class="simple">
<dt>filename   =  name of FV3 data file in use, i.e.</dt><dd><p>‘atmos_average.tile6.nc’</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>Returns:</dt><dd><p>name_fixed: fullpath to correspnding fixed file</p>
<blockquote>
<div><p>DDDDD.atmos_average.nc  -&gt; DDDDD.fixed.nc
atmos_average.tileX.nc  -&gt; fixed.tileX.nc</p>
<p><em>variations of these work too</em></p>
<p>DDDDD.atmos_average_plevs.nc            -&gt; DDDDD.fixed.nc
DDDDD.atmos_average_plevs_custom.nc     -&gt; DDDDD.fixed.nc
atmos_average.tileX_plevs.nc            -&gt; fixed.tileX.nc
atmos_average.tileX_plevs_custom.nc     -&gt; fixed.tileX.nc
atmos_average_custom.tileX_plevs.nc     -&gt; fixed.tileX.nc</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.get_longname_units">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">get_longname_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fNcdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.get_longname_units" title="Link to this definition"></a></dt>
<dd><p>Return the ‘long_name’ and ‘units’  attributes of a netcdf variable.
If the attributes are not present, this function will return blank strings instead of raising an error
Args:</p>
<blockquote>
<div><p>fNcdf: an opened netcdf file
varname:  A variable to extract the attribute from (e.g. ‘ucomp’)</p>
</div></blockquote>
<dl class="simple">
<dt>Return:</dt><dd><p>longname_txt : long_name attribute, e.g. ‘zonal winds’
units_txt    : units attribute, e.g. [m/s]</p>
</dd>
</dl>
<p><strong>* NOTE*</strong>
Some functions in MarsVars edit the units, e.g. turn [kg]  to [kg/m], therefore the empty string is made 4
characters in length (’    ‘ instead of ‘’) to allow for editing by editing units_txt[:-2] for example</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.wbr_cmap">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">wbr_cmap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.wbr_cmap" title="Link to this definition"></a></dt>
<dd><p>Returns a color map that goes from white&gt;blue&gt;green&gt;yellow&gt;red or ‘wbr’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.rjw_cmap">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">rjw_cmap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.rjw_cmap" title="Link to this definition"></a></dt>
<dd><p>Returns a color map that goes from red&lt;jade&lt;wisteria or ‘rjw’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.dkass_dust_cmap">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">dkass_dust_cmap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.dkass_dust_cmap" title="Link to this definition"></a></dt>
<dd><p>Returns a color map that goes from yellow&gt;orange&gt;red&gt;purple
Provided by Courtney B.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.dkass_temp_cmap">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">dkass_temp_cmap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.dkass_temp_cmap" title="Link to this definition"></a></dt>
<dd><p>Returns a color map that goes from black&gt;purple&gt;blue&gt;green&gt;yellow&gt;orange&gt;red
Provided by Courtney B.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.pretty_print_to_fv_eta">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">pretty_print_to_fv_eta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nperline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.pretty_print_to_fv_eta" title="Link to this definition"></a></dt>
<dd><p>Print the ak or bk coefficients to copy paste in fv_eta.f90
Args:</p>
<blockquote>
<div><p>data: ak or bk data
varname: the variable name, ‘a’ or ‘b’
nperline:the number of elements per line</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>The print statement ready to copy-paste in fv_eta.f90</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.replace_dims">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">replace_dims</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ncvar_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vert_dim_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.replace_dims" title="Link to this definition"></a></dt>
<dd><p>Update the name for the variables dimension to match FV3’s
Args:</p>
<blockquote>
<div><p>Ncvar_dim: Netcdf variable dimensions, e.g f_Ncdf.variables[‘temp’].dimensions
vert_dim_name(optional): ‘pstd’, ‘zstd’, or ‘zagl’ if the vertical dimensions is ambigeous</p>
</div></blockquote>
<dl class="simple">
<dt>Return:</dt><dd><p>dims_out: updated dimensions matching FV3’s naming convention</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="amescap.Script_utils.ak_bk_loader">
<span class="sig-prename descclassname"><span class="pre">amescap.Script_utils.</span></span><span class="sig-name descname"><span class="pre">ak_bk_loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fNcdf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#amescap.Script_utils.ak_bk_loader" title="Link to this definition"></a></dt>
<dd><p>Return the ak and bk. First look in the current netcdf file.
If not found, this routine will check the XXXXX.fixed.nc in the same directory and then in the XXXXX.fixed.tileX.nc files if present
Args:</p>
<blockquote>
<div><p>fNcdf: an opened netcdf file</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>ak,bk : the ak, bk values</p>
</dd>
</dl>
<p><strong>*NOTE*</strong></p>
<p>This routine will look for both ‘ak’ and ‘pk’.</p>
<p>There are cases when it is convenient to load the  pk, bk once at the begining of the files in MarsVars.py,
However the pk, bk may not be used at all in the calculation. This is the case with MarsVars.py XXXXX.atmos_average_psd.nc –add msf (which operates on the _pstd.nc file)</p>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Alex Kling, Courtney Batterson, &amp; Victoria Hartwick (Mars Climate Modeling Center | NASA Ames Research Center).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>